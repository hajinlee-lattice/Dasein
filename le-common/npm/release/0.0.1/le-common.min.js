angular.module("le.common.util.UnderscoreUtility",[]).factory("_",function(){return window._}),angular.module("le.common.util.BrowserStorageUtility",["LocalStorageModule"]).service("BrowserStorageUtility",function(localStorageService){this.CacheTimeout=288e5,this._tokenDocumentStorageKey="GriotTokenDocument",this._tokenDocument=null,this._loginDocumentStorageKey="GriotLoginDocument",this._loginDocument=null,this._sessionDocumentStorageKey="GriotSessionDocument",this._sessionDocument=null,this._clientSessionStorageKey="GriotClientSession",this._clientSession=null,this._currentTabStorageKey="GriotCurrentTab",this._currentTab=null,this._configDocumentStorageKey="GriotConfigDocument",this._configDocument=null,this._widgetConfigDocumentStorageKey="GriotWidgetConfigDocument",this._widgetConfigDocument=null,this._globalAdminTenantDocumentStorageKey="GriotGlobalAdminTenantDocument",this._globalAdminTenantDocument=null,this.setTokenDocument=function(data,successHandler){this._setProperty(data,successHandler,"_tokenDocument","_tokenDocumentStorageKey")},this.getTokenDocument=function(){return this._getProperty("_tokenDocument","_tokenDocumentStorageKey")},this.setLoginDocument=function(data,successHandler){this._setProperty(data,successHandler,"_loginDocument","_loginDocumentStorageKey")},this.getLoginDocument=function(){return this._getProperty("_loginDocument","_loginDocumentStorageKey")},this.setSessionDocument=function(data,successHandler){this._setProperty(data,successHandler,"_sessionDocument","_sessionDocumentStorageKey")},this.getSessionDocument=function(){return this._getProperty("_sessionDocument","_sessionDocumentStorageKey")},this.setClientSession=function(data,successHandler){var availableRightsDictionary={};null!==data&&null!==data.AvailableRights&&($.each(data.AvailableRights,function(key,availableRight){availableRightsDictionary[availableRight.Key]=availableRight.Value}),data.availableRightsDictionary=availableRightsDictionary),this._setProperty(data,successHandler,"_clientSession","_clientSessionStorageKey")},this.getClientSession=function(){return this._getProperty("_clientSession","_clientSessionStorageKey")},this.setCurrentTab=function(data,successHandler){this._setProperty(data,successHandler,"_currentTab","_currentTabStorageKey")},this.getCurrentTab=function(){return this._getProperty("_currentTab","_currentTabStorageKey")},this.setConfigDocument=function(data,successHandler){this._setProperty(data,successHandler,"_configDocument","_configDocumentStorageKey")},this.getConfigDocument=function(){return this._getProperty("_configDocument","_configDocumentStorageKey")},this.setWidgetConfigDocument=function(data,successHandler){this._setProperty(data,successHandler,"_widgetConfigDocument","_widgetConfigDocumentStorageKey")},this.getWidgetConfigDocument=function(){return this._getProperty("_widgetConfigDocument","_widgetConfigDocumentStorageKey")},this.setGlobalAdminTenantDocument=function(data,successHandler){this._setProperty(data,successHandler,"_globalAdminTenantDocument","_globalAdminTenantDocumentStorageKey")},this.getGlobalAdminTenantDocument=function(){return this._getProperty("_globalAdminTenantDocument","_globalAdminTenantDocumentStorageKey")},this._setProperty=function(data,successHandler,propStorageObjName,propStorageKeyName){this[propStorageKeyName]&&(null!==data?(data.Timestamp=(new Date).getTime()+this.CacheTimeout,localStorageService.set(this[propStorageKeyName],data),this[propStorageObjName]=data):this._clearProperty(propStorageObjName,propStorageKeyName),successHandler&&"function"==typeof successHandler&&successHandler())},this._getProperty=function(propStorageObjName,propStorageKeyName){if(propStorageObjName&&propStorageKeyName){if(null===this[propStorageObjName]||this[propStorageObjName].Timestamp<(new Date).getTime()){var fromStorage=localStorageService.get(this[propStorageKeyName]);this[propStorageObjName]=fromStorage||null}return this[propStorageObjName]}return null},this._clearProperty=function(propStorageObjName,propStorageKeyName){localStorageService.remove(this[propStorageKeyName]),this[propStorageObjName]=null},this.clear=function(keepAuthentication){keepAuthentication="boolean"==typeof keepAuthentication?keepAuthentication:!1,keepAuthentication||this.setClientSession(null),this.setLoginDocument(null),this.setSessionDocument(null),this.setCurrentTab(null),this.setConfigDocument(null),this.setWidgetConfigDocument(null)}}),angular.module("le.common.util.SessionUtility",["le.common.util.BrowserStorageUtility"]).service("SessionUtility",function(BrowserStorageUtility){this.ClearSession=function(){BrowserStorageUtility.clear(!1),window.location.reload()},this.HandleResponseErrors=function(data,status){401===status&&this.ClearSession()}});