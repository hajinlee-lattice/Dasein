<?xml version='1.0' encoding='utf-8'?>
<Server port="8005" shutdown="SHUTDOWN">
    <Listener className="org.apache.catalina.startup.VersionLoggerListener"/>
    <!-- Security listener. Documentation at /docs/config/listeners.html
    <Listener className="org.apache.catalina.security.SecurityListener" />
    -->
    <!--APR library loader. Documentation at /docs/apr.html -->
    <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on"/>
    <!-- Prevent memory leaks due to use of particular java/javax APIs-->
    <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"/>
    <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
    <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener"/>

    <GlobalNamingResources>
        <Resource name="UserDatabase" auth="Container"
                  type="org.apache.catalina.UserDatabase"
                  description="User database that can be updated and saved"
                  factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
                  pathname="conf/tomcat-users.xml"/>

        <Resource name="jdbc/PLS_MultiTenant"
                  auth="Container"
                  type="javax.sql.DataSource"
                  driverClassName="com.mysql.jdbc.Driver"
                  url="jdbc:mysql://localhost:3306/PLS_MultiTenant"
                  username="root"
                  password="welcome"

                  maxTotal="16"
                  maxIdle="2"
                  maxWaitMillis="10000" />

        <Resource name="jdbc/GlobalAuthentication"
                  auth="Container"
                  type="javax.sql.DataSource"
                  driverClassName="com.mysql.jdbc.Driver"
                  url="jdbc:mysql://localhost:3306/GlobalAuthentication"
                  username="root"
                  password="welcome"

                  maxTotal="4"
                  maxIdle="1"
                  maxWaitMillis="10000" />

        <Resource name="jdbc/QuartzDB"
                  auth="Container"
                  type="javax.sql.DataSource"
                  driverClassName="com.mysql.jdbc.Driver"
                  url="jdbc:mysql://localhost:3306/QuartzDB"
                  username="root"
                  password="welcome"

                  maxTotal="4"
                  maxIdle="1"
                  maxWaitMillis="10000" />

        <Resource name="jdbc/Data_MultiTenant"
                  auth="Container"
                  type="javax.sql.DataSource"
                  driverClassName="com.mysql.jdbc.Driver"
                  url="jdbc:mysql://localhost:3306/Data_MultiTenant"
                  username="root"
                  password="welcome"

                  maxTotal="8"
                  maxIdle="1"
                  maxWaitMillis="10000" />
    </GlobalNamingResources>

    <Service name="MatchAPI">
        <Connector port="8076" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9076"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9076" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="MatchApiEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/matchapi" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="Admin">
        <Connector port="8085" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9085"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9085" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="AdminEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/admin" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="PlayMaker">
        <Connector port="8071" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9071"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9071" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="PlayMakerEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/playmaker" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="OAuth">
        <Connector port="8072" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8072"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9072" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="OAuthEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/oauth" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="ScoringAPI">
        <Connector port="8073" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9073"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9073" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="ScoringApiEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/scoringapi" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="SAML">
        <Connector port="8087" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9087"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9087" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="SAMLEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/saml" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="API">
        <Connector port="8074" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9074"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9074" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="ApiEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/api" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="Ulysses">
        <Connector port="8075" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9075"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9075" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="UlyssesEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/ulysses" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

    <Service name="MS">
        <Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9080"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9080" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="MicroserviceEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/ms" unpackWARs="true" autoDeploy="true" undeployOldVersions="true"
                  startStopThreads="4"/>
        </Engine>
    </Service>

    <Service name="PLS">
        <Connector port="8081" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="9081"
                   compression="on"
                   compressibleMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xhtml+xml,application/javascript,application/json"/>
        <Connector port="9081" protocol="org.apache.coyote.http11.Http11NioProtocol" executor="tomcatThreadPool"
                   SSLEnabled="true" scheme="https" secure="true"
                   sslImplementationName="org.apache.tomcat.util.net.openssl.OpenSSLImplementation"
                   connectionTimeout="20000"
                   compression="on" compressibleMimeType="text/plain,application/json" >
            <UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"
                             readTimeout="20000" writeTimeout="20000" compression="on" />
            <SSLHostConfig>
                <Certificate certificateKeyFile="/etc/ledp/tls/server.key"
                             certificateFile="/etc/ledp/tls/server.crt"
                             protocols="all"
                             insecureRenegotiation="true"
                             type="RSA" />
            </SSLHostConfig>
        </Connector>
        <Engine name="PlsEngine" defaultHost="localhost">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
                       resourceName="UserDatabase"/>
            </Realm>
            <Host name="localhost" appBase="webapps/pls" unpackWARs="true" autoDeploy="true"
                  undeployOldVersions="true"/>
        </Engine>
    </Service>

</Server>
