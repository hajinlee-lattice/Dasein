alias cplfresh='rm -Rf $HOME/.m2/repository/com/latticeengines && mvn -DskipTests clean install'
alias leversion='cat $WSHOME/le-parent/pom.xml | grep \<version\> | head -n 1 | cut -d \< -f 2 | cut -d \> -f 2'

alias hdp-start='$WSHOME/le-dev/scripts/start-cluster.sh'
alias hdp-stop='$WSHOME/le-dev/scripts/stop-cluster.sh'

alias dfdplnobld='hadoop fs -rm -r -f "/app/dataflow/*" && hadoop fs -mkdir -p /app/dataflow/lib && hadoop fs -put $WSHOME/le-dataflow/target/le-dataflow*shaded.jar /app/dataflow/lib'
alias dfdpl='dirs -c && pushd $WSHOME/le-dataflow && mvn -Pshaded-yarn -DskipTests clean install && dfdplnobld && popd'

alias wfdplnobld='hadoop fs -rm -r -f "/app/workflow/*" && hadoop fs -mkdir -p /app/workflow'
alias wfdpl='mvn -Pshaded-yarn -DskipTests clean install && wfdplnobld'

alias dfapidplnobld='hadoop fs -rm -r /app/dataflowapi || true && hadoop fs -mkdir -p /app/dataflowapi/lib && hadoop fs -copyFromLocal $WSHOME/le-dataflowapi/target/le-dataflowapi*shaded.jar /app/dataflowapi/lib'
alias createpod='cd $WSHOME/le-baton && mvn -f pom-batontool.xml -DskipTests clean install && java -jar target/le-baton-tool-*-shaded.jar --podId Default --connectionString localhost:2181 createPod'
alias dfapidpl='mvn -Pshaded-yarn -DskipTests clean install && dfapidplnobld'

alias wfapidplnobld='hadoop fs -rm -r /app/workflowapi || true && hadoop fs -mkdir -p /app/workflowapi/lib && hadoop fs -copyFromLocal $WSHOME/le-workflowapi/target/le-workflowapi*shaded.jar /app/workflowapi/lib'
alias wfapidpl='dirs -c && pushd $WSHOME/le-workflowapi && mvn -Pshaded-yarn -DskipTests clean install && wfapidplnobld && popd'

alias scoringdplnobld='hadoop fs -rm -r /app/scoring || true && hadoop fs -mkdir -p /app/scoring/lib  && hadoop fs -mkdir -p /app/scoring/scripts && hadoop fs -copyFromLocal $WSHOME/le-scoring/target/le-scoring*shaded.jar /app/scoring/lib && hadoop fs -copyFromLocal src/main/python/scoring.py /app/scoring/scripts'
alias scoringdpl='mvn -Pshaded-yarn -DskipTests clean install && scoringdplnobld'

alias dcbld='dirs -c && pushd $WSHOME/le-datacloud && mvn -T4 -DskipTests clean install && popd'
alias dcdplnobld='hadoop fs -mkdir -p /app/datacloud/lib && hadoop fs -rm -r /app/datacloud || true && hadoop fs -mkdir -p /app/datacloud/lib && hdfs dfs -copyFromLocal $WSHOME/le-datacloud/yarn/target/le-datacloud*shaded.jar /app/datacloud/lib && hdfs dfs -copyFromLocal $WSHOME/le-datacloud/etl/templates /app/datacloud'
alias dcdpl='dcbld && dirs -c && pushd $WSHOME/le-datacloud/yarn && mvn -Pshaded-yarn -DskipTests clean install && popd && dcdplnobld'

alias dpdplnobld='hadoop fs -rm -r /app/dataplatform || true && hadoop fs -mkdir -p /app/dataplatform/lib && hadoop fs -copyFromLocal $WSHOME/le-dataplatform/target/le-dataplatform*shaded.jar /app/dataplatform/lib && bash $WSHOME/le-dataplatform/bin/deployPythonHDFS.sh'
alias dpdpl='mvn -Pshaded-yarn -DskipTests clean install && dpdplnobld'

alias dedplnobld='hadoop fs -rm -r /app/dellebi || true && hadoop fs -mkdir -p /app/dellebi/lib && hadoop fs -copyFromLocal $WSHOME/le-dellebi/target/le-dellebi*shaded.jar /app/dellebi/lib'
alias dedpl='mvn -Pshaded-yarn -DskipTests clean install && dedplnobld'

alias sqdplnobld='hadoop fs -rm -r /app/sqoop 2>/dev/null || true && hadoop fs -mkdir -p /app/sqoop/lib && hadoop fs -copyFromLocal $WSHOME/le-sqoop/target/le-sqoop*shaded.jar /app/sqoop/lib'
alias sqdpl='mvn -Pshaded-yarn -DskipTests clean install && sqdplnobld'

alias eaidplnobld='hadoop fs -rm -r /app/eai || true && hadoop fs -mkdir -p /app/eai/lib && hadoop fs -copyFromLocal $WSHOME/le-eai/target/le-eai*shaded.jar /app/eai/lib'
alias eaidpl='mvn -Pshaded-yarn -DexcludeArtifactIds=jetty-servlets,jetty-continuation -DskipTests clean install && eaidplnobld'

alias apidpl='mvn -DskipTests clean dependency:copy-dependencies deploy && cp target/le-api-*-SNAPSHOT.war $JETTY_HOME/webapps'
alias scoringapidpl='mvn -DskipTests clean dependency:copy-dependencies deploy && cp target/le-scoringapi-*-SNAPSHOT.war $JETTY_HOME/webapps'
alias secdpl='mvn -DskipTests -Djavax.net.ssl.trustStore=certificates/laca-ldap.dev.lattice.local.jks clean install'
alias scheddpl='mvn -DskipTests clean dependency:copy-dependencies deploy && cp target/le-scheduler-*-SNAPSHOT.jar $HADOOP_HOME/share/hadoop/yarn'
alias perfdpl='mvn -DskipTests clean dependency:copy-dependencies deploy && cp target/le-perf-*-SNAPSHOT.jar $HADOOP_HOME/share/hadoop/yarn'

alias msbld='dirs -c && pushd $WSHOME/le-microservice && mvn -T8 -DskipTests clean package && popd'

alias swlibdpllibs='bin/deployToSwlib.sh -o install -n prospectdiscovery -g com.latticeengines -a le-serviceflows-prospectdiscovery -i com.latticeengines.prospectdiscovery.Initializer -f ../le-serviceflows/prospectdiscovery/target/le-serviceflows-prospectdiscovery-*-shaded.jar && bin/deployToSwlib.sh -o install -n leadprioritization -g com.latticeengines -a le-serviceflows-leadprioritization -i com.latticeengines.leadprioritization.Initializer -f ../le-serviceflows/leadprioritization/target/le-serviceflows-leadprioritization-*-shaded.jar && bin/deployToSwlib.sh -o install -n cdl -g com.latticeengines -a le-serviceflows-cdl -i com.latticeengines.cdl.Initializer -f ../le-serviceflows/cdl/target/le-serviceflows-cdl-*-shaded.jar && bin/deployToSwlib.sh -o install -n datacloud -g com.latticeengines -a le-serviceflows-datacloud -i com.latticeengines.datacloud.Initializer -f ../le-serviceflows/datacloud/target/le-serviceflows-datacloud-*-shaded.jar'
alias swlibdpl='dirs -c && pushd $WSHOME/le-swlib && hadoop fs -rm -r /app/swlib || true && swlibdpllibs && popd'
alias sfbld='dirs -c && pushd $WSHOME/le-serviceflows && mvn -T6 -DskipTests clean install && popd'
alias sfdpl='sfbld && swlibdpl'

alias cfgdplnobld='hdfs dfs -rm -r -f /app/conf || true; hdfs dfs -mkdir -p /app/conf; hdfs dfs -put $WSHOME/le-config/conf/env/dev/latticeengines.properties /app/conf; hdfs dfs -put $WSHOME/le-config/conf/env/dev/log4j.properties /app/conf;'
alias cfgbld='bash $WSHOME/le-dev/scripts/cfgbld.sh'
alias cfgdpl='cfgbld && cfgdplnobld'

alias runtest='python $WSHOME/le-dev/scripts/runtest.py'
alias pytests='cd $WSHOME/le-dataplatform/src/test/python && PYTHONPATH=../../main/python:../../main/python/pipeline:$PYTHONPATH $ANACONDA_HOME/envs/lattice/bin/py.test'
alias mdstests='mvn -Pfunctional -DargLine="" verify'
alias dftests='mvn -Pfunctional -DargLine="" verify'
alias querytests='mvn -Pfunctional -DargLine="" verify'
alias dfapitests='mvn -Pfunctional -DargLine="" verify'
alias dfapidptests='mvn -Pdeployment -DargLine="" verify'
alias dptests='mvn -Pfunctional -DargLine="" verify'
alias dpdeptests='mvn -Pdeployment -DargLine="" verify'
alias eaitests='mvn -Pfunctional -DargLine="" verify'
alias schedtests='mvn -Pfunctional -DargLine="" verify'
alias schedtests-dc='mvn -Pfunctional -DargLine="" verify'
alias dptestscc='mvn -Pcc -Pfunctional verify'
alias apptests='mvn -Pcc -Pfunctional verify'
alias apitests='mvn -Pfunctional -DargLine="" -Djetty.class.path=$JAVA_HOME/lib/tools.jar:$HADOOP_HOME/share/hadoop/common/hadoop-common-2.4.0.jar:$HADOOP_HOME/etc/hadoop clean verify'
alias scoringapitests='MAVEN_OPTS="-Xmx1024m -XX:MaxPermSize=256m" mvn -Pfunctional -DargLine="" -Djetty.port=8077 clean verify'
alias scoringapidptests='MAVEN_OPTS="-Xmx1024m -XX:MaxPermSize=256m" mvn -Pdeployment -DargLine="" -Djetty.port=8011 clean verify'
alias mtrtests='mvn -Pfunctional -DargLine="" verify'
alias admindpltests='mvn -Pdeployment -DargLine= -DGMAIL_APP_PASSWORD=puntdwffotmrruwu -Djavax.net.ssl.trustStore=certificates/laca-ldap.dev.lattice.local.jks -Djava.util.logging.config.file=../le-dev/test-logging.properties verify'
alias admintests='MAVEN_OPTS="-Xmx1024m -XX:MaxPermSize=256m" mvn -Pfunctional -DargLine="" -Djetty.port=8085 clean verify'
alias sectests='MAVEN_OPTS="-Xmx1024m -XX:MaxPermSize=256m" mvn -Pfunctional -DargLine="" -Djavax.net.ssl.trustStore=certificates/laca-ldap.dev.lattice.local.jks clean verify'
alias plsdeptests='MAVEN_OPTS="-Xmx1024m -XX:MaxPermSize=256m" mvn -Pdeployment -DargLine="" -Djetty.port=8081 clean verify'
alias plstests='MAVEN_OPTS="-Xmx1024m -XX:MaxPermSize=256m" mvn -Pfunctional -DargLine="" -Djavax.net.ssl.trustStore=../le-security/certificates/laca-ldap.dev.lattice.local.jks -Djetty.port=8081 verify'
alias wftests='mvn -Pfunctional -DargLine="" verify'
alias wfdptests='mvn -Pdeployment -DargLine="" verify'
alias wfapitests='mvn -Pfunctional -DargLine="" verify'
alias wfapidptests='mvn -Pdeployment -DargLine="" verify'
alias plstestscc='mvn -Pcc -Pfunctional -Djavax.net.ssl.trustStore=certificates/laca-ldap.dev.lattice.local.jks -Djetty.port=8081 -DPLS_PROPDIR=conf/env/dev verify'
alias apidpltests='mvn -Pdeployment -DargLine="" -Djetty.class.path=$JAVA_HOME/lib/tools.jar:$HADOOP_HOME/share/hadoop/common/hadoop-common-2.4.0.jar:$HADOOP_HOME/etc/hadoop verify'
alias scoringtests='mvn -Pfunctional -DargLine="" verify'
alias pdtests='mvn -Pfunctional -DargLine="" clean verify'
alias pdapitests='mvn -Papi.functional -DargLine="" -DPROPDATA_MADISON_QUARTZ_ENABLED=disabled -DDPDL_QUARTZ_ENABLED=disabled clean verify'
alias svcflowtests='mvn -Pfunctional -DargLine="" verify'
alias svcflowtestscluster='SERVICEFLOWS_LOCAL=false mvn -Pfunctional-cluster -DargLine="" verify'
alias samltests='mvn -Pfunctional -DargLine="" verify'
alias encrtests='mvn -Pfunctional -DargLine="" verify'
alias samldeptests='mvn -Pdeployment -DargLine="" verify'
alias samldeptestsssl='sudo ssl/install_cert.sh $JAVA_HOME $WSHOME && mvn -Pdeployment -DargLine="" verify'
alias recordtransformertest='MAVEN_OPTS="-Xmx2048m -XX:MaxPermSize=256m" mvn -Pfunctional -Djetty.port=8016 -DTENANT=tenant10 -Dtest=RecordTransformerTestNG verify &> /tmp/test.log'
alias cleanuptesttenants='python $WSHOME/le-dev/scripts/cleanup.py'
alias ulyssestests='mvn -Pfunctional -DargLine="" verify'
alias ulyssesdptests='mvn -Pdeployment -DargLine="" verify'

alias runjettyapi='MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4002,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -Djetty.class.path=$JAVA_HOME/lib/tools.jar:$HADOOP_HOME/etc/hadoop:$HADOOP_HOME/share/hadoop/common/hadoop-common-$HADOOP_VERSION.$HDP_VERSION.jar -Pfunctional -Pjetty jetty:run'
alias runjettysec='rm -f /var/log/ledp/le-pls*.log && MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4003,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -Pfunctional clean jetty:run'
alias runjettypls='bash -c "rm -f /var/log/ledp/le-pls*.log" && runtest pls -p jetty -c jetty:run'
alias runjettyplsnodl='bash -c "rm -f /var/log/ledp/le-pls*.log" && MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4003,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -o -Djavax.net.ssl.trustStore=certificates/laca-ldap.dev.lattice.local.jks  -Pjetty -Pfunctional -DLOCAL_MODEL_DL_QUARTZ_ENABLED=disabled -Djava.util.logging.config.file=../le-dev/test-logging.properties jetty:run'
alias runjettyadmin='bash -c "rm -f /var/log/ledp/le-admin*.log" && MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4005,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -o -Pfunctional  -Pjetty -Djavax.net.ssl.trustStore=../le-security/certificates/laca-ldap.dev.lattice.local.jks -Djava.util.logging.config.file=../le-dev/test-logging.properties jetty:run'
alias runjettyjob='bash -c "rm -f /var/log/ledp/le-job*.log" && MODEL_DL_QUARTZ_ENABLED=enabled && MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4014,server=y,suspend=n -Xmx4048m -XX:MaxPermSize=512m" mvn -Djetty.port=8092 jetty:run'
alias runjettyeai='bash -c "rm -f /var/log/ledp/le-eai*.log" && MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4003,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -DexcludeArtifactIds=jetty-servlets,jetty-continuation -Pfunctional  -Pjetty jetty:run'
alias runjettymds='MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4003,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -DexcludeArtifactIds=jetty-servlets,jetty-continuation -Pfunctional jetty:run'
alias runjettydfapi='MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4003,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -Pfunctional -DargLine="" -DexcludeArtifactIds=jetty-servlets,jetty-continuation clean jetty:run'
alias runjettyscoringapi='bash -c "rm -f /var/log/ledp/le-scoringapi*.log" && MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4004,server=y,suspend=n -Xmx4048m -XX:MaxPermSize=512m" mvn  -Pjetty -Pfunctional jetty:run'
alias runjettyjobpd='source $WSHOME/le-dev/latticerc && cd $WSHOME/le-job && bash -c "rm -f /var/log/ledp/le-job*.log" && CLASSPATH=$HADOOP_CONF_DIR:$TEZ_CONF_DIR:$HADOOP_COMMON_JAR JOB_MODULE=propdata PROPDATA_MADISON_QUARTZ_ENABLED=enabled PROPDATA_COLLECTION_QUARTZ_ENABLED=enabled mvn -Ptest  -Pjetty jetty:run'
alias runjettymatchapi='runtest matchapi -p jetty -c jetty:run'
alias runjettyulysses='bash -c "rm -f /var/log/ledp/le-ulysses*.log" && MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4007,server=y,suspend=n -Xmx4048m -XX:MaxPermSize=512m" mvn  -Pjetty -Pfunctional jetty:run'
alias runjetty='runtest -p jetty -c jetty:run'
alias runprecheckintest='$WSHOME/le-dev/scripts/runPreCheckInTest.sh'
alias precheckin='runtest pls -p deployment -g precheckin -t SelfServiceModelingEndToEnd'

alias replacePropertyTokens='python $WSHOME/le-config/updateProperty.py'

alias uibld='pushd $WSHOME/le-ui && npm install && popd'
alias uirunlpi='cd $WSHOME/le-ui && npm run local'
alias uirunadmin='cd $WSHOME/le-ui && npm run local_admin'

alias dpltc='python $WSHOME/le-dev/scripts/tcdpl.py'
alias runtc='bash $WSHOME/le-dev/scripts/run-tomcat.sh'

alias runoauth='mvn spring-boot:run -DOAUTH2_PROPDIR=conf/env/dev -DOAUTH2_DB_PROPDIR=../le-oauth2db/conf/env/dev/ -Dserver.port=8072'
alias runplay='mvn spring-boot:run -DOAUTH2_PROPDIR=../le-oauth2/conf/env/dev -DPLAYMAKER_PROPDIR=conf/env/dev -Dserver.port=8071 -DOAUTH2_DB_PROPDIR=../le-oauth2db/conf/env/dev/'

alias runsaml='MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4006,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -Djetty.port=8087 jetty:run'
alias runsamlssl='MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4006,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=256m" mvn -Djetty.port=8087 -Prun.ssl jetty:run'
alias runui='pushd $WSHOME/le-ui && npm install && npm run local && popd'
alias runadminui='pushd $WSHOME/le-ui && npm install && npm run local_admin && popd'

alias dkrmi='docker rmi -f $(docker images -a --filter "dangling=true" -q --no-trunc) 2>/dev/null'
alias dkrmc='docker rm $(docker ps -a -q) && docker ps -a 2>/dev/null'
alias dkps='docker ps --format "table {{.Names}}\t{{.Ports}}\t{{.Image}}"'
alias dkpull='bash $WSHOME/le-dev/scripts/docker_pull.sh'
alias dkpush='bash $WSHOME/le-dev/scripts/docker_push.sh'

alias conda-on='source $ANACONDA_HOME/bin/activate lattice'
alias conda-off='source $ANACONDA_HOME/bin/deactivate'

alias dbdiff-qa='pushd $WSHOME/le-dev/scripts && bash dbdiff.sh qa && popd'
alias dbdiff-prod='pushd $WSHOME/le-dev/scripts && bash dbdiff.sh prod && popd'

alias dk-setupenv='source $WSHOME/le-dev/scripts/setup_dkenv.sh'
alias dk-up='docker-compose -p lattice -f $WSHOME/le-dev/scripts/docker-compose.yml up -d --remove-orphan'
alias dk-down='docker-compose -p lattice -f $WSHOME/le-dev/scripts/docker-compose.yml down'
alias dk-start-all='docker-compose -p lattice -f $WSHOME/le-dev/scripts/docker-compose.yml start'
alias dk-stop-all='docker-compose -p lattice -f $WSHOME/le-dev/scripts/docker-compose.yml stop'
alias dk-restart='docker-compose -p lattice -f $WSHOME/le-dev/scripts/docker-compose.yml restart'
alias dk-run='bash $WSHOME/le-dev/scripts/docker_run.sh'
alias dk-stop='bash $WSHOME/le-dev/scripts/docker_stop.sh'
alias dkrunui='docker run -itd --name le-ui --net=host -e LE_ENVIRONMENT=dev latticeengines/express'
alias dkstopui='docker stop le-ui; dkrmc'
