<div class="container pd-builder-attributes" ng-controller="CategoryCtrl">
    <div class="row page-header">
        <h4 class="columns six">
            <span ng-if="!ParentValue">{{AttrKey}}</span> 
            <span ng-if="ParentValue">
                <button 
                    type="button" 
                    class="button icon-button white-button"
                    ui-sref="builder.category({AttrKey: '{{ ParentKey }}', ParentKey: '', ParentValue: ''})"
                >
                    <span class="fa fa-arrow-left"></span>
                </button>
                &nbsp;{{ParentValue}}&nbsp;
            </span>
            <span class="smaller" ng-if="total">({{total}})</span>
        </h4>
        <span class="columns six">
            <input 
                type="text" 
                class="form-control" 
                ng-model="SearchByName.AttrValue"
                ng-show="ShowSearch" 
            />
            <button type="button" class="button icon-button white-button" ng-click="ShowSearch = !ShowSearch" ng-init="ShowSearch = false;">
                <span class="fa fa-search"></span>
            </button>
            <button type="button" class="button icon-button white-button" ng-click="FilterChecked = !FilterChecked" ng-init="FilterChecked = false;">
                <span class="fa fa-check-square{{ FilterChecked ? '' : '-o' }}"></span>
            </button>
            <button type="button" class="button icon-button white-button" ng-click="SortOrder = (SortOrder == 'AttrValue' ? '-AttrValue' : 'AttrValue')" ng-init="SortOrder = 'AttrValue';">
                <span class="fa fa-sort-alpha-{{ SortOrder == 'AttrValue' ? 'asc' : 'desc' }}"></span>
            </button>
            <a ui-sref="jobs.import.credentials"><button class="button orange-button">Save Attributes</button></a>
        </span>
    </div>



    <div class="row">
        <div class="twelve columns tile-list">

            <div class="list-item{{ item.selected ? ' selected' : '' }} {{ FilterChecked ? ' filter-checked' : '' }}" ng-repeat="(col, item) in list | filter:SearchByName | orderBy: SortOrder">
                <div class="tile">
            		<div class="tile-head">
            			<div class="pull-left">
    	        			<input 
                                type="checkbox" 
                                id="attr-checkbox_{{ row }}_{{ col }}" 
                                class="attr-checkbox custom"
                                ng-model="item.selected"
                                ng-change="handleTileSelection($event);"
                            />
    	        			<label for="attr-checkbox_{{ row }}_{{ col }}" class="attr-label">
                                {{ item.AttrValue | limitTo: truncate_limit }}{{item.AttrValue.length > truncate_limit ? '&hellip;' : ''}}
                                &nbsp;(<span class="blue-text"> {{ item.total || "5" }} </span>)
                            </label>
            			</div>
            			<div class="text-right pull-right" ui-sref="builder.category({ParentKey: '{{ AttrKey }}', ParentValue: '{{ item.AttrValue }}' , AttrKey: 'SubIndustry'})">
            				<h3 class="lift">{{ item.lift || "1.9x" }}</h3><span class="success-text">${{ item.revenue | number:0 }}</span>
            			</div>
            		</div><!-- End .tile-head -->
            		<div class="tile-meta" ui-sref="builder.category({ParentKey: '{{ AttrKey }}', ParentValue: '{{ item.AttrValue }}' , AttrKey: 'SubIndustry'})">
            			<div class="stats-container pull-left">
            				<dl class="stats">
            					<dt>Available from Lattice</dt>
            					<dd class="blue-text">{{ item.lattice_companies | number:0 }}</dd>
            				</dl>
            				<dl class="stats">
            					<dt>All in your database</dt>
            					<dd class="in-database">
                                    {{ item.their_companies | number:0 }}&nbsp;
                                <span class="smaller">
                                    ({{ item.mediump | number:1 }}%)
                                </span></dd>
            				</dl>
            				<dl class="stats">
            					<dt>Your customers</dt>
            					<dd class="your-customers">
                                    {{ item.customers | number:0 }}&nbsp;
                                <span class="smaller">
                                    ({{ item.smallp_of_theirs | number:1 }}%)
                                </span></dd>
            				</dl>
            			</div>
                        <div class="circle-container pull-right">
                            <div 
                                class="big-circle saphire-bkg">
                            </div>
                            <div 
                                class="medium-circle gun-metal-bkg"
                                style="width:{{ item.mediump }}%;height:{{ item.mediump }}%;">
                            </div>
                            <div 
                                class="small-circle jet-bkg"
                                style="width:{{ item.smallp }}%;height:{{ item.smallp }}%;">
                            </div>
                        </div>
            		</div><!-- End .tile-meta -->
                </div><!-- End .tile -->
            </div><!-- End .list-item -->

        </div><!-- End .twelve.columns -->
    </div><!-- End .row -->

</div>