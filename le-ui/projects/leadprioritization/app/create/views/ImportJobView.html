<section class="import-job-status ng-scope">
    <div class="row">
        <div class="six columns offset-three">    

            <h2>Build Model: {{modelDisplayName}}</h2>
            <dl data-ng-if="jobStatus != null">
                <dt>Job Started</dt>
                <dd>
                    <div class="progress-icon">
                        <span data-ng-if="jobStatus == 'Pending'">
                            <span class="loading-small"></span>
                        </span>
                        <span data-ng-if="startTimestamp">
                            <i class="fa fa-check"></i>
                        </span>
                    </div>
                    <div>{{startTimestamp | date: 'MM/dd/yyyy h:mma'}}</div>
                </dd>
            </dl>
            <dl data-ng-if="jobStepsRunningStates.load_data || jobStepsCompletedStates.load_data || stepFailed == 'load_data'">
                <dt>Loading Data</dt>
                <dd>
                    <div class="progress-icon">
                        <span data-ng-if="jobStepsRunningStates.load_data">
                            <span class="loading-small"></span>
                        </span>
                        <span data-ng-if="jobStepsCompletedStates.load_data">
                            <i class="fa fa-check"></i>
                        </span>
                        <span data-ng-if="stepFailed == 'load_data'">
                            <i class="fa fa-warning"></i>
                        </span>
                    </div>
                    <div>{{stepsCompletedTimes.load_data | date: 'MM/dd/yyyy h:mma'}}</div>
                </dd>
            </dl>
            <dl data-ng-if="jobStepsRunningStates.generate_insights || jobStepsCompletedStates.generate_insights || stepFailed == 'generate_insights'">
                <dt>Matching to Data Cloud</dt>
                <dd>
                    <div class="progress-icon">
                        <span data-ng-if="jobStepsRunningStates.generate_insights">
                            <span class="loading-small"></span>
                        </span>
                        <span data-ng-if="jobStepsCompletedStates.generate_insights">
                            <i class="fa fa-check"></i>
                        </span>
                        <span data-ng-if="stepFailed == 'generate_insights'">
                            <i class="fa fa-warning"></i>
                        </span>
                    </div>
                    <div>{{stepsCompletedTimes.generate_insights | date: 'MM/dd/yyyy h:mma'}}</div>
                </dd>
            </dl>
            <dl data-ng-if="jobStepsRunningStates.create_global_target_market || jobStepsCompletedStates.create_global_target_market || stepFailed == 'create_global_target_market'">
                <dt>Building Models...</dt>
                <dd>
                    <div class="progress-icon">
                        <span data-ng-if="jobStepsRunningStates.create_global_target_market">
                            <span class="loading-small"></span>
                        </span>
                        <span data-ng-if="jobStepsCompletedStates.create_global_target_market">
                            <i class="fa fa-check"></i>
                        </span>
                        <span data-ng-if="stepFailed == 'create_global_target_market'">
                            <i class="fa fa-warning"></i>
                        </span>
                    </div>
                    <div>{{stepsCompletedTimes.create_global_target_market | date: 'MM/dd/yyyy h:mma'}}</div>
                </dd>
            </dl>
        </div>
    </div>
    <div class="row">
        <div class="six columns offset-three">

            <div class="meter animate" data-ng-if="jobStatus != 'Failed' || jobStatus != 'Completed' || jobStatus != null">
              <span style="width: 20%" data-ng-if="jobStatus == 'Pending'"><span></span></span>
              <span style="width: 40%" data-ng-if="jobStepsRunningStates.load_data || jobStepsCompletedStates.load_data || stepFailed == 'load_data'"><span></span></span>
              <span style="width: 60%" data-ng-if="jobStepsRunningStates.generate_insights || jobStepsCompletedStates.generate_insights || stepFailed == 'generate_insights'"><span></span></span>
              <span style="width: 80%" data-ng-if="jobStepsRunningStates.create_global_target_market || jobStepsCompletedStates.create_global_target_market || stepFailed == 'create_global_target_market'"><span></span></span>
            </div>

            <div data-ng-if="jobStatus == 'Completed'">
                <a ui-sref="home.jobs.status.csv({jobId: job.id})">View Report</a>
            </div>

        </div>
    </div>
    <div class="row">
        <div class="six columns offset-three field-mapping-actions">
            <div class="pull-left">
                <button ui-sref="home.models.import" class="button white-button" type="button">
                    {{ResourceUtility.getString('MODEL_COLUMNS_CSV_BUTTON_BACK')}}
                </button>
            </div>
            <div class="pull-right">
                <button ui-sref="home.models" class="button orange-button" type="button">
                    {{ResourceUtility.getString('MODEL_COLUMNS_CSV_BUTTON_MODELS_LIST')}}
                </button>
                <p>{{ResourceUtility.getString('MODEL_COLUMNS_CSV_BUTTON_MODELS_LIST_HELPER_TEXT')}}</p>
            </div>
        </div>
    </div>
</section>
