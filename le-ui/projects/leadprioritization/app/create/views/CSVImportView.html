<section class="container setup-import">
<form name="uploadForm" ng-controller="csvImportController" novalidate>
  <div class="row">
    <div class="columns six offset-three">
        <!-- Error messaging
        <div data-ng-show="showError">
            <div class="alert alert-danger">
                <span><i class="fa fa-exclamation-circle fa-inverse"></i>Error messaging goes here</span>
                <a class="close" href="javascript:void(0)" data-ng-click="closeErrorClick($event)"><i class="fa fa-times fa-inverse"></i></a>
            </div>
        </div>
        -->
        <div class="form-group" ng-class="{ 'has-error' : uploadForm.modelName.$invalid && !uploadForm.modelName.$pristine }">
          <label>{{ResourceUtility.getString('MODEL_IMPORT_CSV_LABEL_MODELNAME')}}&nbsp;<span class="more-info" tooltips tooltip-template="<h4>Naming Convention</h4><p>We recommend organizing your models based on segment or target market.</p>" tooltip-side="right" tooltip-size="large" tooltip-close-button="true">&#105;</span></label>
          <input 
            type="text" 
            class="form-control" 
            name="modelDisplayName"
            ng-model="modelDisplayName"
            ng-minlength="1"
            ng-maxlength="50"
            placeholder="Example: US-Enterprise-model"
            required />
          <p class="help-block">{{ResourceUtility.getString('MODEL_IMPORT_CSV_ERROR_MODELNAME')}}</p>
        </div>

        <div class="form-group file-upload" ng-class="{ 'has-error' : uploadForm.csvFileName.$invalid && !uploadForm.csvFileName.$pristine }">

     <label for="loadfile">{{ResourceUtility.getString('MODEL_IMPORT_CSV_LABEL_FILE')}}&nbsp;<span class="more-info" tooltips tooltip-template="<h4>CSV File</h4><p>Creating a CSV file with one row per lead with the fields which you want to train the prediction model with. For best results, there should be at least 50,000 leads, 500 of which should indicate success, and the conversion rate should be between 1% and 10%.</p><h4 class='divider'>Fields For Account Model</h4><p>Required fields are: Id, Website and Event.</p><p>Additional fields are: CompanyName, City, State, Country, PostalCode, Industry, AnnualRevenue, NumberOfEmployees, CreatedDate, LastModifiedDate, YearStarted, PhoneNumber</p><h4 class='divider'>Fields For Lead Model</h4><p>Required fields are: Id, Email, Event.</p><p>Addtional fields are: CompanyName, City, State, Country, PostalCode, CreatedDate, LastModifiedDate, FirstName, LastName, Title, LeadSource, IsClosed, StageName, PhoneNumber, AnnualRevenue, NumberOfEmployees, Industry</p>" tooltip-side="right" tooltip-size="large" tooltip-close-button="true">&#105;</span></label>
          <input 
            id="uploadFileInput" 
            class="form-control" 
            disabled="disabled"
            placeholder="Choose File" />
          <div class="fileUpload button blue-button">
              <span>{{ResourceUtility.getString('MODEL_IMPORT_CSV_BUTTON_BROWSE')}}</span>
              <input
                id="uploadBtn"
                name="csvFileName"
                ng-model="csvFileName"
                required
                type="file"
                accept=".csv"
                class="upload"
                csv-uploader="csvFile" />
          </div>
          <p class="help-block">{{ResourceUtility.getString('MODEL_IMPORT_CSV_ERROR_FILE')}}</p>
        </div>

        <!-- Script needed to get filepath and place it into the input field -->
        <script>
          document.getElementById("uploadBtn").onchange = function () {
              if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1){
                document.getElementById("uploadFileInput").value = this.value
              } else {
                document.getElementById("uploadFileInput").value = this.value.substring(12);
              }
          };
        </script>

        <div class="form-group">
          <label>Model Type&nbsp;</label>
          <div class="toggle-check">
            <label for="account-lead-check">{{ResourceUtility.getString('MODEL_IMPORT_CSV_LABEL_ACCOUNT')}}</label>
            <input type="checkbox" name="account-lead-check" ng-model="accountLeadCheck" id="account-lead-check" class="toggle-switch" />
            <label for="account-lead-check">{{ResourceUtility.getString('MODEL_IMPORT_CSV_LABEL_LEAD')}}</label>
          </div>          
        </div>

    </div><!-- End .six.columns -->
  </div><!-- End .container.row -->

  <div class="row form-actions">
    <div class="three columns offset-three">
        <button 
            type="button" 
            ui-sref="home.models"
            class="button gray-button block-button">
          {{ResourceUtility.getString('MODEL_IMPORT_CSV_BUTTON_CANCEL')}}</button>
    </div>
    <div class="three columns">
        <button 
            type="button" 
            class="button orange-button block-button"
            ng-disabled="uploadForm.$invalid"
            ng-click="uploadFile()">
          {{ResourceUtility.getString('MODEL_IMPORT_CSV_BUTTON_UPLOAD_FILE')}}
        </button>
    </div>
  </div>

</form>
</section>
