<div class="third-party-ids container file-import-content">
    
    <p>Please provide other external identifiers you would like to use to reference your account records.  For example, you can provide account IDs used in your CRM systems, ERP systems and MAP systems.  These identifiers will not be used to de-duplicate your accounts.  They will be stored in Lattice platform so you can retrieve the records using these IDs via Lattice APIs or applications.</p>

    <ul class="field-mapping" ng-if="vm.fields">
        <li class="header">
            <ul>
                <li>External System Name</li>
                <li>External System Type</li>
                <li>Fields in the uploaded file</li>
            </ul>
        </li>
        <li class="field" ng-repeat="field in vm.fields track by $index" ng-init="vm.fieldMapping[$index] = vm.fieldMapping[$index] || {}">
            <ul>
                <li>
                    <input type="text" ng-model="vm.fieldMapping[$index].userName" ng-blur="vm.changeLatticeField(vm.fieldMapping)" />
                </li>
                <li>
                    <select
                        ng-model="vm.fieldMapping[$index].mappedField"
                        ng-change="vm.changeLatticeField(vm.fieldMapping)">
                        <option value="" hidden disabled>--</option>
                        <option ng-repeat="type in field.types" value="{{type}}" ng-disabled="vm.unavailableTypes.indexOf(type) !== -1">
                            {{type}}
                        </option>
                    </select>
                </li>
                <li>
                    <select 
                        ng-model="vm.fieldMapping[$index].userField" 
                        ng-change="vm.changeLatticeField(vm.fieldMapping)"
                        ng-options="item disable when (vm.unavailableFields.indexOf(item) !== -1) for item in vm.availableFields | filter: vm.hiddenFilter">
                    </select>
<!--                 
                    <select
                        ng-model="vm.fieldMapping[$index].userField"
                        ng-change="vm.changeLatticeField(vm.fieldMapping)">
                        <option value="" hidden disabled>--</option>
                        <option ng-repeat="availableField in vm.availableFields" ng-value="availableField.userField">
                            {{availableField.userField}}
                        </option>
                    </select>
-->                
                </li>
            </ul>
        </li>
    </ul>
 	<button 
		class="button white-button" 
		type="button"
		ng-click="vm.addIdentifier($event)" ng-disabled="vm.fields.length === vm.availableFields.length">
            Add An{{vm.fields.length ? 'other' : ''}} Identifier
    </button>

</div>