<div class="third-party-ids container file-import-content">
    
    <p>Please provide other external identifiers you would like to use to reference your account records.  For example, you can provide account IDs used in your CRM systems, ERP systems and MAP systems.  These identifiers will not be used to de-duplicate your accounts.  They will be stored in Lattice platform so you can retrieve the records using these IDs via Lattice APIs or applications.</p>

    <form name="form">
        <ul class="field-mapping" ng-if="vm.fields">
            <li class="header">
                <ul>
                    <li>External System Name</li>
                    <li>External System Type</li>
                    <li>Fields in the uploaded file</li>
                </ul>
            </li>
            <li class="field" ng-repeat="field in vm.fields track by $index" ng-init="vm.fieldMapping[$index] = vm.fieldMapping[$index] || {}">
                <ul>
                    <li>
                        <input 
                            type="text" 
                            ng-model="vm.fieldMapping[$index].userName" 
                            ng-blur="vm.changeLatticeField(vm.fieldMapping, form)" 
                            ng-init="vm.checkValidDelay(form)"
                            ng-required="true" />
                    </li>
                    <li>
                        <select
                            ng-model="vm.fieldMapping[$index].mappedField"
                            ng-required="true"
                            ng-change="vm.changeLatticeField(vm.fieldMapping, form)">
                            <option value="" hidden disabled>--</option>
                            <option ng-repeat="type in field.types" value="{{type}}">
                                {{type}}
                            </option>
                        </select>
                    </li>
                    <li>
                        <select 
                            ng-model="vm.fieldMapping[$index].userField" 
                            ng-change="vm.changeLatticeField(vm.fieldMapping, form)"
                            ng-required="true"
                            ng-options="item disable when (vm.unavailableFields.indexOf(item) !== -1) for item in vm.availableFields | filter: vm.hiddenFilter">
                        </select>
                    </li>
                    <li>
                        <span ng-click="vm.removeIdentifier($index)"i title="remove mapping"><i class="fa fa-times-circle"></i></span>
                    </li>
                </ul>
            </li>
        </ul>
    </form>
 	<button 
		class="button white-button" 
		type="button"
		ng-click="vm.addIdentifier($event)">
            Add An{{vm.fields.length ? 'other' : ''}} Identifier
    </button>

</div>