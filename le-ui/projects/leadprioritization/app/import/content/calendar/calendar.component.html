<section class="container data-import import-calendar file-import-content" ng-class="{'has-calendar': vm.calendar}">
    <div class="row">
        <le-modal-window config="vm.modalConfig" callback-function="vm.modalCallback(args)">
            <br />
            <p>
                The Business Calendar will be updated throughout the tenant.
            </p>
            <br />
        </le-modal-window>

        <div class="columns eight offset-two box-outline">
            <div class="section-header">
                <h4>Business Calendar</h4>
            </div>
            <hr />

            <div class="calander-container">
                <h5>
                    Please enter your business calendar so we can build accurate time based analytics.
                </h5>
                
                <div class="mode starting-day" ng-click="vm.changeMode('STARTING_DAY');" ng-class="{active: vm.mode == 'STARTING_DAY'}">
                    <ul class="nth-day-picker" ng-init="vm.nthMapping = vm.nthMapping || {}">
                        <li class="nth">
                            <select
                            class="form-control"
                            name="nth"
                            ng-model="vm.nthMapping.nth"
                            ng-change="vm.changeNth(vm.nthMapping)"
                            value="">
                                <option value="" hidden disabled>nth</option>
                                <option value="1st">1st</option>
                                <option value="2nd">2nd</option>
                                <option value="3rd">3rd</option>
                                <option value="4th">4th</option>
                            </select>
                        </li>
                        <li class="day">
                            <select
                            class="form-control"
                            name="day"
                            ng-model="vm.nthMapping.day"
                            ng-change="vm.changeNth(vm.nthMapping)"
                            value="">
                                <option value="" hidden disabled>Day</option>
                                <option value="SUN">Sunday</option>
                                <option value="MON">Monday</option>
                                <option value="TUE">Tuesday</option>
                                <option value="WED">Wednesday</option>
                                <option value="THU">Thursday</option>
                                <option value="FRI">Friday</option>
                                <option value="SAT">Saturday</option>
                            </select>
                        </li>
                        <li>of</li>
                        <li class="month">
                            <select
                            class="form-control"
                            name="month"
                            ng-model="vm.nthMapping.month"
                            ng-change="vm.changeNth(vm.nthMapping)"
                            value="">
                                <option value="" hidden disabled>Month</option>
                                <option value="JAN">January</option>
                                <option value="FEB">February</option>
                                <option value="MAR">March</option>
                                <option value="APR">April</option>
                                <option value="MAY">May</option>
                                <option value="JUN">June</option>
                                <option value="JUL">July</option>
                                <option value="AUG">August</option>
                                <option value="SEP">September</option>
                                <option value="OCT">October</option>
                                <option value="NOV">November</option>
                                <option value="DEC">December</option>
                            </select>
                        </li>
                    </ul>
                </div>

                <div class="fancy-or" data-content="or"></div>

                <div class="mode starting-date" ng-click="vm.changeMode('STARTING_DATE'); " ng-class="{active: vm.mode == 'STARTING_DATE'}">
                    <ul class="month-picker">
                        <li><div ng-click="vm.selectDate('01-01')" ng-class="{active: vm.dateParams.monthNumber == '1', selected: vm.selectedDate == '01-01'}">Jan</div></li>
                        <li><div ng-click="vm.selectDate('02-01')" ng-class="{active: vm.dateParams.monthNumber == '2', selected: vm.selectedDate == '02-01'}">Feb</div></li>
                        <li><div ng-click="vm.selectDate('03-01')" ng-class="{active: vm.dateParams.monthNumber == '3', selected: vm.selectedDate == '03-01'}">Mar</div></li>
                        <li><div ng-click="vm.selectDate('04-01')" ng-class="{active: vm.dateParams.monthNumber == '4', selected: vm.selectedDate == '04-01'}">Apr</div></li>
                        <li><div ng-click="vm.selectDate('05-01')" ng-class="{active: vm.dateParams.monthNumber == '5', selected: vm.selectedDate == '05-01'}">May</div></li>
                        <li><div ng-click="vm.selectDate('06-01')" ng-class="{active: vm.dateParams.monthNumber == '6', selected: vm.selectedDate == '06-01'}">Jun</div></li>
                        <li><div ng-click="vm.selectDate('07-01')" ng-class="{active: vm.dateParams.monthNumber == '7', selected: vm.selectedDate == '07-01'}">Jul</div></li>
                        <li><div ng-click="vm.selectDate('08-01')" ng-class="{active: vm.dateParams.monthNumber == '8', selected: vm.selectedDate == '08-01'}">Aug</div></li>
                        <li><div ng-click="vm.selectDate('09-01')" ng-class="{active: vm.dateParams.monthNumber == '9', selected: vm.selectedDate == '09-01'}">Sep</div></li>
                        <li><div ng-click="vm.selectDate('10-01')" ng-class="{active: vm.dateParams.monthNumber == '10', selected: vm.selectedDate == '10-01'}">Oct</div></li>
                        <li><div ng-click="vm.selectDate('11-01')" ng-class="{active: vm.dateParams.monthNumber == '11', selected: vm.selectedDate == '11-01'}">Nov</div></li>
                        <li><div ng-click="vm.selectDate('12-01')" ng-class="{active: vm.dateParams.monthNumber == '12', selected: vm.selectedDate == '12-01'}">Dec</div></li>
                    </ul>

                    <div id="datepicker"></div>
                </div>

                <div class="quarter-picker-container" ng-class="{disabled: !vm.calendar}">
                    <h5>Which month per quarter has 5 weeks?</h5>
                    <ul class="quarter-picker">
                        <li><div ng-click="vm.selectQuarter('1')" ng-class="{active: vm.selectedQuarter == '1'}">1st</div></li>
                        <li><div ng-click="vm.selectQuarter('2')" ng-class="{active: vm.selectedQuarter == '2'}">2nd</div></li>
                        <li><div ng-click="vm.selectQuarter('3')" ng-class="{active: vm.selectedQuarter == '3'}">3rd</div></li>
                    </ul>
                </div>

                <div class="note">
                    Note: <span ng-bind-html="vm.miniMarkdown(vm.note)"></span>
                </div>
            </div>
            <hr />
            <div class="container section-actions row form-actions">
                <div class="pull-left">
                    <button class="button white-button block-button" ui-sref="home.import.entry.product_hierarchy">Back</button>
                </div>
                <div class="pull-right">
                    <button class="button blue-button" ng-disabled="!vm.calendar || (vm.calendar && vm.calendar.mode !== vm.mode) || vm.saving" ng-click="vm.saveCalendar()"><i ng-if="vm.saving" class="fa fa-spinner fa-spin fa-fw"></i> Next</button>
                </div>
            </div>
        </div>
    </div>
</section>