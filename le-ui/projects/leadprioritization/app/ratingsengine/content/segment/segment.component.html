<div class="ratingengine-segment playbook-content container" ng-class="{'dashboard-content': vm.stateParams.section && vm.stateParams.section.indexOf('dashboard.') !== -1}">
    <div class="inner-container">
        <form name="segment_form">
            <div class="header">
                <h2>Segments
                <!--
                    <span class="more-info">&#105;
                        <div class="tooltip_">
                            <div class="cover">
                                <h3>Stuff about segments</h3>
                                <p>
                                    Segements stuff long text or something here
                                </p>
                            </div>
                        </div>
                    </span>
                -->
                </h2>
            </div>

            <div class="content-body no-data" ng-if="!vm.hasSegments">
                There are currently no Segments to select. <br/>Please <a ui-sref="home.segment.explorer.attributes({segment:'Create'})">create at least one Segment</a> in order to create your Rating Engine.
            </div>

            <div class="content-body" ng-if="vm.hasSegments">

                <div class="filters">
                    <div class="ng-search">
                        <input type="text" class="form-control" placeholder="Search {{vm.segments.length}} Segments" ng-model="vm.search" />
                        <a class="button icon-button white-button" ng-click="vm.search.length ? vm.search = '' : ''">
                            <span class="fa fa-search" ng-show="!vm.search.length"></span>
                            <span class="fa fa-times" ng-show="vm.search.length"></span>
                        </a>
                    </div>
                </div>

                <ul class="list">
                    <li class="item header segment">
                        <ul>
                            <li class="name" ng-click="up = !up; vm.sortBy = (up ? '-' : '') + 'display_name'">
                                Segment
                                <i ng-if="!vm.endsWith(vm.sortBy, 'display_name')"" class="fa fa-sort"></i>
                                <i ng-if="vm.endsWith(vm.sortBy, 'display_name')" class="fa fa-sort-{{up ? 'asc' : 'desc'}}"></i>
                            </li>
                            <li class="accounts" ng-click="up = !up; vm.sortBy = (up ? '-' : '') + 'numAccounts'" ng-disabled="vm.loadingSupplementaryData">
                                <i class="fa fa-spinner fa-spin" ng-if="vm.loadingSupplementaryData"></i>
                                Accounts
                                <i ng-if="!vm.endsWith(vm.sortBy, 'numAccounts')" class="fa fa-sort"></i>
                                <i ng-if="vm.endsWith(vm.sortBy, 'numAccounts')" class="fa fa-sort-{{up ? 'asc' : 'desc'}}"></i>
                            </li>
                            <li class="contacts" ng-click="up = !up; vm.sortBy = (up ? '-' : '') + 'numContacts'" ng-disabled="vm.loadingSupplementaryData">
                                Contacts 
                                <i ng-if="!vm.endsWith(vm.sortBy, 'numContacts')"" class="fa fa-sort"></i>
                                <i ng-if="vm.endsWith(vm.sortBy, 'numContacts')" class="fa fa-sort-{{up ? 'asc' : 'desc'}}"></i>
                            </li>
                        </ul>
                    </li>
                    <li 
                        ng-repeat="segment in (filteredList = (vm.segments | filter: {'display_name': vm.search})) 
                                    | orderBy: vm.sortBy
                                    | startFrom: (vm.currentPage - 1) * vm.pageSize 
                                    | limitTo: vm.pageSize"
                        ng-disabled="vm.block_user"
                        class="item segment">
                        <ul>
                            <li class="name">
                                <input  type="radio" 
                                        id="{{segment.name}}" 
                                        name="segment.name" 
                                        ng-value="segment.name"
                                        ng-model="vm.stored.segment_selection" 
                                        ng-click="vm.setSegment(segment)" />
                                <label for="{{segment.name}}">{{segment.display_name}}</label></li>
                            <li class="accounts">
                                <span ng-if="segment.numAccounts">{{segment.numAccounts|number}}</span>
                            </li>
                            <li class="contacts">
                                <span ng-if="segment.numContacts">{{segment.numContacts|number}}</span>
                            </li>
                        </ul>
                    </li>
                </ul>


                <pd-pagination-controls
                    current="vm.currentPage"
                    max="filteredList.length / vm.pageSize"
                    ng-if="vm.showPagination">
                </pd-pagination-controls>

            </div><!-- End .content-body -->
            <button class="button blue-button" ng-if="vm.stateParams.section === 'dashboard.segment'" ng-click="vm.savePlay()" ng-disabled="!vm.stored.segment_selection">Save</button>
        </form>
    </div>
</div>