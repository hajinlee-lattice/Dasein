<div class="col-xs-12" ng-if="vm_analyticTest.loading">
  <div class="loader"> </div>
  <h2 class="text-center">{{::vm_analyticTest.labels.LOAD_SAVING}}</h2>
</div>
<div class="col-xs-12" ng-if="!vm_analyticTest.loading">
  <div ng-if="vm_analyticTest.message" class="row">
    <p class="alert" ng-class="vm_analyticTest.error ? 'alert-danger' : 'alert-success'">{{vm_analyticTest.message}}</p>
    <div class="json-panel modelrun-status" ng-if="vm_analyticTest.modelRunStatus">
      <i class="fa fa-times" ng-click="vm_analyticTest.clearModelRunStatus()"></i>
      <pre>{{vm_analyticTest.modelRunStatus}}</pre>
    </div>
  </div>
  <div class="row">
    <form class="form-inline">
      <div class="form-group">
      <label for="search">Search:
        <input class="form-control" name="search" type="text" ng-model="search" ng-change="vm_analyticTest.cur = 1"/>
      </label>
      </div>
    </form>
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th ng-repeat="col in ::vm_analyticTest.columns">{{::vm_analyticTest.labels[col.key.toUpperCase()]}}</th>
          <th>{{::vm_analyticTest.labels.ACTION}}</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="analyticTest in vm_analyticTest.analyticTests |
          filter:{'name': search} |
          startFrom: ((vm_analyticTest.cur - 1) * vm_analyticTest.pageSize) |
          limitTo:vm_analyticTest.pageSize">
          <td ng-repeat="col in ::vm_analyticTest.columns">
            {{::analyticTest[col.key] | joinList:', '}}
          </td>
          <td>
            <span ng-click="vm_analyticTest.runTest(analyticTest.name)" class="header-btn">{{::vm_analyticTest.labels.RUN}}<span>
          </td>
        </tr>
      </tbody>
    </table>
    <ul uib-pagination total-items="vm_analyticTest.analyticTests.length" ng-model="vm_analyticTest.cur" max-size="20" items-per-page="vm_analyticTest.pageSize" class="pagination-sm" boundary-links="true"></ul>
  </div>
  <div class="row" ng-if="vm_analyticTest.isCreatingTest">
    <hr>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th ng-repeat="col in ::vm_analyticTest.columns">
            {{::vm_analyticTest.labels[col.key.toUpperCase()]}}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td ng-repeat="col in ::vm_analyticTest.columns">
            <input
              class="form-control"
              type="text"
              ng-if="col.type==='input'"
              placeholder="{{::vm_analyticTest.labels[col.key.toUpperCase()]}}"
              ng-model="vm_analyticTest.analyticTest[col.key]"/>
            <select
              class="form-control"
              type="text"
              ng-if="col.type==='select'"
              placeholder="{{::vm_analyticTest.labels[col.key.toUpperCase()]}}"
              ng-model="vm_analyticTest.analyticTest[col.key]"
              ng-options="opt.value as opt.name for opt in vm_analyticTest.entityOptions[col.key]"
              ng-change="vm_analyticTest.selectChange(col.key, vm_analyticTest.analyticTest[col.key])">
            </select>
            <button
              class="form-control"
              placeholder="{{::vm_analyticTest.labels[col.key.toUpperCase()]}}"
              ng-if="col.type==='multiSelect'"
              ng-click="vm_analyticTest.multiSelect(vm_analyticTest.analyticTest, col.key)">
              {{vm_analyticTest.analyticTest[col.key].length}} selected
            </button>
            <button
              class="form-control"
              placeholder="{{::vm_analyticTest.labels[col.key.toUpperCase()]}}"
              ng-if="col.type==='multiInput'"
              ng-click="vm_analyticTest.multiInput(vm_analyticTest.analyticTest, col.key)">
              {{vm_analyticTest.analyticTest[col.key].length}} selected
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="pull-right">
      <button class="btn btn-default" ng-click="vm_analyticTest.saveNewTest()">{{::vm_analyticTest.labels.SAVE_TEST}}</button>
      <button class="btn" ng-click="vm_analyticTest.cancelNewTest()">{{::vm_analyticTest.labels.CANCEL_TEST}}</button>
    </div>
  </div>
  <div class="row" ng-if="!vm_analyticTest.isCreatingTest">
    <hr>
    <div class="pull-right">
      <button class="btn btn-default" ng-click="vm_analyticTest.newTest()">{{::vm_analyticTest.labels.NEW_TEST}}</button>
    </div>
  </div>
</div>

<script type="text/ng-template" id="MultiSelectModal.html">
  <div class="modal-header">
    <h3 class="modal-title" id="modal-title">{{::title}}</h3>
  </div>
  <div class="modal-body modal-max-height" id="modal-body">
    <form class="form-inline">
      <div class="form-group">
      <label for="search">Search:
        <input class="form-control" name="search" type="text" ng-model="search"/>
      </label>
      </div>
    </form>
    <multi-select-checkbox options="options" selected="selected" readonly="readonly" search="search"></multi-select-checkbox>
  </div>
</script>

<script type="text/ng-template" id="MultiInputModal.html">
  <div class="modal-header">
    <h3 class="modal-title" id="modal-title">{{::title}}</h3>
  </div>
  <div class="modal-body modal-max-height" id="modal-body">
    <div class="col-xs-12" ng-if="loading">
      <div class="loader loader-xs"> </div>
    </div>
    <p ng-if="message" class="alert" ng-class="error ? 'alert-danger' : 'alert-success'">{{message}}</p>
    <form class="form-inline">
      <div class="form-group">
      <label for="search">Search:
        <input class="form-control" name="search" type="text" ng-model="search"/>
      </label>
      </div>
    </form>
    <multi-select-checkbox options="options" selected="selected" search="search"></multi-select-checkbox>
    <div class="container-fluid">
      <hr>
      <div class="row">
        <h4>Create Dataset from Tenant</h4>
        <div class="col col-xs-4">Source: <select class="form-control" ng-model="datasetToCreate.type" ng-options="opt as opt for opt in typeOptions"></select>
        </div>
        <div class="col col-xs-4">Tenant ID: <input class="form-control" ng-model="datasetToCreate.tenant"type="text"/>
        </div>
        <div class="col col-xs-4">Model ID: <input class="form-control" ng-model="datasetToCreate.id"type="text"/>
        </div>
      </div>
      <div class="row gutter content-align-right">
        <button class="btn btn-default" ng-click="create()">Create</button>
        <button class="btn" ng-click="clear()">Clear</button>
      </div>
    </div>
  </div>
</script>
