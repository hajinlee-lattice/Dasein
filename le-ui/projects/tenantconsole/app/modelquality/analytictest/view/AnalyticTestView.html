<div class="col-xs-12" ng-if="vm_analyticTest.loading">
  <div class="loader"> </div>
  <h2 class="text-center">{{::vm_analyticTest.labels.LOAD_SAVING}}</h2>
</div>
<div class="col-xs-12" ng-if="!vm_analyticTest.loading">
  <div ng-if="vm_analyticTest.message" class="row">
    <p class="alert" ng-class="vm_analyticTest.error ? 'alert-danger' : 'alert-success'">
      {{vm_analyticTest.message}}
    </p>
  </div>
  <div class="row">
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th ng-repeat="col in ::vm_analyticTest.columns">{{::vm_analyticTest.labels[col.key.toUpperCase()]}}</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="analyticTest in vm_analyticTest.analyticTests
          | startFrom: ((vm_analyticTest.cur - 1) * vm_analyticTest.max)
          | limitTo:vm_analyticTest.max">
          <td ng-repeat="col in ::vm_analyticTest.columns">
            {{analyticTest[col.key] | joinList:', '}}
          </td>
        </tr>
      </tbody>
    </table>
    <ul uib-pagination total-items="vm_analyticTest.total" ng-model="vm_analyticTest.cur" max-size="vm_analyticTest.max" class="pagination-sm" boundary-links="true"></ul>
  </div>
  <div class="row" ng-if="vm_analyticTest.isCreatingTest">
    <hr>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th ng-repeat="col in ::vm_analyticTest.columns">
            {{::vm_analyticTest.labels[col.key.toUpperCase()]}}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td ng-repeat="col in ::vm_analyticTest.columns">
            <input
              class="form-control"
              type="text"
              ng-if="col.type==='input'"
              placeholder="{{::vm_analyticTest.labels[col.key.toUpperCase()]}}"
              ng-model="vm_analyticTest.analyticTest[col.key]"/>
            <select
              class="form-control"
              type="text"
              ng-if="col.type==='select'"
              placeholder="{{::vm_analyticTest.labels[col.key.toUpperCase()]}}"
              ng-model="vm_analyticTest.analyticTest[col.key]"
              ng-options="opt.name as opt.name for opt in vm_analyticTest.entityOptions[col.key]">
            </select>
            <button
              class="form-control"
              placeholder="{{::vm_analyticTest.labels[col.key.toUpperCase()]}}"
              ng-if="col.type==='multi'"
              ng-click="vm_analyticTest.multiSelect(vm_analyticTest.analyticTest, col.key)">
              {{vm_analyticTest.analyticTest[col.key].length}} selected
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="pull-right">
      <button class="btn btn-default" ng-click="vm_analyticTest.saveNewTest()">{{::vm_analyticTest.labels.SAVE_TEST}}</button>
      <button class="btn" ng-click="vm_analyticTest.cancelNewTest()">{{::vm_analyticTest.labels.CANCEL_TEST}}</button>
    </div>
  </div>
  <div class="row" ng-if="!vm_analyticTest.isCreatingTest">
    <hr>
    <div class="pull-right">
      <button class="btn btn-default" ng-click="vm_analyticTest.newTest()">{{::vm_analyticTest.labels.NEW_TEST}}</button>
    </div>
  </div>
</div>
 
<script type="text/ng-template" id="MultiSelectModal.html">
  <div class="modal-header">
    <h3 class="modal-title" id="modal-title">{{::title}}</h3>
  </div>
  <div class="modal-body modal-max-height" id="modal-body">
    <ul>
      <li class="checkbox" ng-repeat="opt in options">
        <label>
          <input type="checkbox" ng-model="selected[opt.name]" ng-checked="selected[opt.name]"/>{{opt.name}}
        </label>
      </li>
    </ul>
  </div>
</script>
