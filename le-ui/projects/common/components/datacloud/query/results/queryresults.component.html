
<div class="container query-results">

    <ul class="filters">
        <li class="query">
            <div class="ng-search">
                <form ng-enter="vm.submitQuery()">
                    <a class="button icon-button white-button" ng-click="vm.clearSearch()">
                        <span 
                            class="fa fa-search" 
                            ng-show="!vm.search.length && !vm.loading"></span>
                        <span 
                            class="fa fa-times" 
                            ng-show="vm.search.length && !vm.loading"></span>
                    </a>
                    <input 
                        type="text" 
                        name="SegmentResultSearch" 
                        class="form-control" 
                        placeholder="Search"
                        ng-model="vm.search"
                        ng-model-options="vm.searchOptions"
                    />
                </form>
            </div>
        </li>
        <li class="buttons" ng-if="vm.section !== 'dashboard.targets' && vm.section !== 'wizard.targets'">
            <div>
                <a href="/files/latticeinsights/segments/downloadcsv?Authorization={{vm.authToken}}"><button class="button icon-button white-button"><i class="fa fa-download"></i></button></a>
                <button ng-if="!vm.inModel" class="button white-button" ui-sref="home.import.entry">Import Data</button>
                <button class="button icon-button white-button" ui-sref="{{ vm.refineQuery() }}" ng-disabled="vm.saving">Refine Query</button>
                <button ng-if="!vm.saving" class="button icon-button blue-button" ng-click="vm.saveSegment()">Save Segment</button>
                <button ng-if="vm.saving" disabled class="button icon-button blue-button">Saving <i class="fa fa-spinner fa-pulse fw"></i></button>
            </div>
        </li>
    </ul>

    <table class="list-table">
        <thead ng-class="{'sort-asc': !vm.sortDesc, 'sort-dsc': vm.sortDesc}">
            <tr>
                <th ng-click="sortType = 'LDC_Name'; sortReverse = !sortReverse">
                    Name
                    <span ng-show="sortType == 'LDC_Name' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'LDC_Name' && sortReverse" class="fa fa-caret-up"></span>
                </th>
                <th>Website</th>
                <th ng-click="sortType = 'LDC_City'; sortReverse = !sortReverse">
                    City
                    <span ng-show="sortType == 'LDC_City' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'LDC_City' && sortReverse" class="fa fa-caret-up"></span>
                </th>
                <th ng-click="sortType = 'LDC_State'; sortReverse = !sortReverse">
                    State
                    <span ng-show="sortType == 'LDC_State' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'LDC_State' && sortReverse" class="fa fa-caret-up"></span>
                </th>
                <th ng-click="sortType = 'LDC_Country'; sortReverse = !sortReverse">
                    Country
                    <span ng-show="sortType == 'LDC_Country' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'LDC_Country' && sortReverse" class="fa fa-caret-up"></span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-show="vm.loading">
                <td colspan="5"><i class="fa fa-spinner fa-pulse fw"></i> Loading Accounts</td>
            </tr>
            <tr 
                ng-repeat="     account in vm.accounts | 
                                orderBy:sortType:sortReverse | 
                                filter:vm.search"
                 ng-show="!vm.loading">

                <td><span class="blue-text">{{account.LDC_Name}}</span></td>
                <td><span class="blue-text">{{account.LDC_Domain}}</span></td>
                <td>{{account.LDC_City}}</td>
                <td>{{account.LDC_State}}</td>
                <td>{{account.LDC_Country}}</td>
            </tr>
        </tbody>
    </table>

    <p ng-show="!vm.loading && !vm.accounts">No Records Found<p>

    <ul class="filters" ng-show="!vm.loading">
        <li>
            <pd-pagination-controls
                current="vm.current"
                max="vm.accountsCount / vm.pagesize">
            </pd-pagination-controls>
        </li>
    </ul>

</div>
