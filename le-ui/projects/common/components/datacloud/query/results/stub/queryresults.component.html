<div class="container query-results">

    <ul class="filters">
        <li class="query">
            <div class="ng-search">
                <form>
                    <a class="button icon-button white-button" ng-click="vm.clearSearch()">
                        <span class="fa fa-search" ng-show="!vm.search.length"></span>
                        <span class="fa fa-times" ng-show="vm.search.length"></span>
                    </a>
                    <input type="text" class="form-control" placeholder="Search" ng-model="vm.search" ng-change="vm.current = 1"/>
                </form>
            </div>
        </li>
        <li class="buttons">
            <div>
                <a ng-href="/files/latticeinsights/segments/downloadcsv?Authorization={{vm.authToken}}&state={{vm.QueryStore.getUiState().name}}"
                    ng-if="vm.results.length > 0"
                    class="button icon-button white-button" target="_self" download>
                    <i class="fa fa-download"></i>
                </a>
                <button ng-if="vm.results.length < 1" class="button icon-button white-button" ng-disabled="true"><i class="fa fa-download"></i></button>
                <button ng-if="!vm.inModel" class="button white-button" ui-sref="home.import.entry">Import Data</button>
                <button class="button icon-button white-button" ui-sref="{{ vm.refineQuery() }}" ng-disabled="vm.saving">Refine Query</button>
                <button ng-if="!vm.saving" class="button icon-button blue-button" ng-click="vm.saveSegment()">Save Segment</button>
                <button ng-if="vm.saving" disabled class="button icon-button blue-button">Saving <i class="fa fa-spinner fa-pulse fw"></i></button>
            </div>
        </li>
    </ul>
    <ul class="filters pagination">
    </ul>

    <table class="list-table" ng-if="vm.results.length > 0">
        <thead>
            <tr>
                <th ng-repeat="col in ::vm.columns">
                    <span>{{::col.display_name}}</span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="r in vm.results |
                            limitTo: vm.pagesize |
                            filter: vm.search">
                 <td ng-repeat="col in ::vm.columns">
                    <span   class="results-table-item results-table-item-{{ col.column_name == 'name' && r.website ? 'company' : col.column_name }}"
                            ng-click="vm.gotoCompanyProfile(col.column_name, r[col.column_name], r)">
                        {{::r[col.column_name]}}
                    </span>
                </td>
            </tr>
        </tbody>
    </table>

    <p ng-if="vm.results.length === 0">
        No Records Found
    <p>

</div>
