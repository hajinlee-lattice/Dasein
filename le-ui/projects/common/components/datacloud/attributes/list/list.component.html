<div class="attr-results-container">
    <ul class="attr-pagination-top" ng-if="$ctrl.subcategory || filteredList.length > $ctrl.filters.pagesize">
        <li class="attr-back-text pull-left" ng-if="$ctrl.subcategory">
            <span ng-click="$ctrl.back()"><i class="fa fa-arrow-left"></i>Back</span>{{$ctrl.subcategory}}
        </li>

        <li class="attr-pagination" ng-if="filteredList.length > $ctrl.filters.pagesize">
            <pd-pagination-controls
                    current="$ctrl.filters.page"
                    max="$ctrl.max = filteredList.length / $ctrl.filters.pagesize">
            </pd-pagination-controls>
        </li>
    </ul>

    <div class="attr-list-noresults" ng-if="!filteredList || filteredList.length === 0">
        No Results.
    </div>

    <ul class="attr-list-results noselect-children">
        <li ng-if="filteredList && filteredList.length > 0">
            <div class="attr-result-checkbox" ng-click="$ctrl.toggleAll()">
                <!--input ng-checked="$ctrl.isAllChecked()" name="{{$ctrl.checkboxName()}}" type="checkbox" /-->

                <i  class="fa" 
                    ng-class="{ 
                        'fa-square-o': !$ctrl.isAllChecked() && !$ctrl.indeterminate[$ctrl.subcategory || 'all_attributes'],
                        'fa-check-square-o': $ctrl.isAllChecked() && !$ctrl.indeterminate[$ctrl.subcategory || 'all_attributes'],
                        'fa-minus-square-o': $ctrl.indeterminate[$ctrl.subcategory || 'all_attributes'],
                    }">
                </i>
            </div>

            <div class="attr-result-label" ng-click="$ctrl.toggleAll()">
                <label for="check_all">Attribute</label>
                <span>({{$ctrl.getCount()|number}})</span>
            </div>
        </li>

        <li ng-repeat="item in (filteredList = ($ctrl.getResults()
                        | filter: $ctrl.getFiltering()))
                        | orderBy: [ $ctrl.filters.sortPrefix + 'DisplayName' ]
                        | startFrom: ($ctrl.filters.page - 1) * $ctrl.filters.pagesize
                        | limitTo: $ctrl.filters.pagesize"
            ng-class="{ 'category': item.Attributes }">
            <div class="attr-result-checkbox" ng-click="$ctrl.toggleSelected(item)">
                <!--input  ng-checked="$ctrl.isChecked(item)" 
                        ng-disabled="$ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item)"
                        ng-if="item.Attributes"
                        name="{{item.DisplayName}}" 
                        type="checkbox" /-->

                <i  class="fa" 
                    ng-if="item.Attributes && !item.IsFrozen"
                    ng-class="{ 
                        'fa-square-o': !$ctrl.isChecked(item) && !$ctrl.indeterminate[item.DisplayName] && !($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item)),
                        'fa-check-square-o': $ctrl.isChecked(item) && !$ctrl.indeterminate[item.DisplayName] && !($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item)),
                        'fa-minus-square-o': $ctrl.indeterminate[item.DisplayName] && !($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item)),
                        'fa-square': !$ctrl.isChecked(item) && !$ctrl.indeterminate[item.DisplayName] && ($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item)),
                        'fa-check-square': $ctrl.isChecked(item) && !$ctrl.indeterminate[item.DisplayName] && ($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item)),
                        'fa-minus-square': $ctrl.indeterminate[item.DisplayName] && ($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item))
                    }">
                </i>
                <i class="fa fa-toggle-on" ng-if="!item.Attributes && !item.IsFrozen && !($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item))" ng-class="{ 'fa-rotate-180': !$ctrl.isChecked(item) }"></i>
                <i class="fa fa-toggle-off" ng-if="!item.Attributes && !item.IsFrozen && ($ctrl.isDisabled(item) || $ctrl.isStartsDisabled(item))" ng-class="{ 'fa-rotate-180': $ctrl.isChecked(item) }"></i>
                <i class="fa fa-exclamation-triangle show-tooltip delay top left" ng-if="item.IsFrozen">
                    <div class="tooltip_" ng-if="item.IsFrozen">
                        <div class="cover">
                            <em>Frozen Attribute:</em>
                            <p>Attribute is Frozen and can not be altered</p>
                        </div>
                    </div>
                </i>
            </div>

            <div class="attr-result-label" ng-click="$ctrl.click(item)">
                <label for="{{item.DisplayName}}">
                    <i class="fa fa-exclamation-circle show-tooltip delay top left" ng-if="item.HasFrozenAttrs">
                        <div class="tooltip_">
                            <div class="cover">
                                <em>Frozen Attributes:</em>
                                <p>This category contains some Frozen Attributes that can not be altered</p>
                            </div>
                        </div>
                    </i>

                    <i class="fa fa-info-circle show-tooltip delay top left" ng-if="$ctrl.isStartsDisabled(item)">
                        <div class="tooltip_">
                            <div class="cover">
                                <em>Attribute Active:</em>
                                <p>This attribute is Active and can not be disabled</p>
                            </div>
                        </div>
                    </i>

                    <span class="show-tooltip delay top left">
                        <div class="tooltip_" ng-if="item.Description">
                            <div class="cover">
                                <em>Description:</em>
                                <p>{{item.Description}}</p>
                            </div>
                        </div>
                        {{item.DisplayName}}
                    </span>
                </label>

                <span ng-if="item.TotalAttrs">({{item.TotalAttrs|number}})</span>
                
                <i class="fa fa-chevron-right" ng-if="item.Attributes"></i>
            </div>
        </li>
    </ul>

    <ul class="attr-pagination-bottom" ng-if="filteredList.length > $ctrl.filters.pagesize">
        <li class="attr-pagination pull-right">
            <pd-pagination-controls
                    current="$ctrl.filters.page"
                    max="$ctrl.max = filteredList.length / $ctrl.filters.pagesize">
            </pd-pagination-controls>
        </li>
    </ul>
</div>