<HTML>
<HEAD>
<TITLE>Knob UI</TITLE>
<img src="./img/logo_lattice.gif" alt="">
<SCRIPT LANGUAGE="JavaScript">
    function createRequest() {
        var result = new XMLHttpRequest();
        if (window.XMLHttpRequest) {
            // FireFox, Safari, etc.
            result = new XMLHttpRequest();
            //result.withCredentials = true;
            if (typeof window.overrideMimeType != 'undefined') {
                result.overrideMimeType('application/json'); // Or anything else
            }
        } else if (window.ActiveXObject) {
            // MSIE
            result = new ActiveXObject("Microsoft.XMLHTTP");
        } else {
            // No known mechanism -- consider aborting the application
        }
        return result;
    }
</SCRIPT>

<SCRIPT LANGUAGE="JavaScript">
    function submitKnob(form) {    
        var c = confirm("Please confirm!");
        if (c == false)
            return;
        var req = createRequest(); // defined above

        req.open("POST", "http://bodcprodvhdp158.prod.lattice.local/rest/throttle", true);
        if (!req) {
            alert('CORS not supported');
            return;
        }

        req.onload = function() {
            var response = req.responseXML;
            var res = response.getElementsByTagName("immediate")[0].childNodes[0].nodeValue;
            var iv = form.immediate[0].checked ? form.immediate[0].value
                    : form.immediate[1].value;
            if (res == iv)
                document.write("Throttle Configuration has been successfully submitted!");
            else
                document.write("Throttle Configuration submission failed!");

        };

        req.onerror = function() {
            console.log('There was an error!');
        };

        req.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
        var obj = new Object();
        obj.enabled = form.enabled[0].checked ? form.enabled[0].value
                : form.enabled[1].value;
        obj.immediate = form.immediate[0].checked ? form.immediate[0].value
                : form.immediate[1].value;
        var jc = form.jobrank_cutoff;
        obj.jobrank_cutoff = jc.value;

        var jsonString = JSON.stringify(obj);
        req.send(jsonString);

        //req.open("GET", "http://bodcprodvutl158.prod.lattice.local/rest/status/subtract/3/2", true);
        //req.send()
    }
</SCRIPT>
</HEAD>
<BODY>
    <P>
        <FORM NAME="form" ACTION="" METHOD="GET">Please provide the configuration:
            <br>
            <table>
                <tr>
                    <td>Enabled:</td>
                    <td>
                        <div class="mx-button">
                            <input type="radio" name="enabled" id="button1" value="True" checked>
                            <label for="button1" unselectable>True</label>
                        </div>
                        <div class="mx-button">
                            <input type="radio" name="enabled" id="button2" value="False">
                            <label for="button2" unselectable>False</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Immediate:</td>
                    <td>
                        <div class="mx-button">
                            <input type="radio" name="immediate" id="button3" value="True" checked>
                            <label for="button3" unselectable>True</label>
                        </div>
                        <div class="mx-button">
                            <input type="radio" name="immediate" id="button4" value="False">
                            <label for="button4" unselectable>False</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>JobRank CutOff:</td>
                    <td>0
                        <input type="range" name="jobrank_cutoff" min="0" max="10" step="1" value="0" onchange="rangevalue.value=value" list=rankvalues>
                        <datalist id=rankvalues>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            <option>6</option>
                            <option>7</option>
                            <option>8</option>
                            <option>9</option>
                        </datalist>
                        <output id="rangevalue" for="jobrank"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button TYPE="button" onClick="submitKnob(this.form)">submit</button>
                    </td>
                    <td>
                        <button TYPE="reset" Value="Reset">reset</button>
                        </div>
                    </td>
                </tr>
            </table>
        </FORM>
    </P>
</BODY>

<STYLE>
 /* table */
 table {
     width: 60%;
     height: 100px;
 }
 tr{
    text-align: justify;
 }
 td {
     padding-top: .5em;
     padding-bottom: .5em;
     width: 50px;

 }
 /* toggle button/
 .cf:before, .cf:after {
    content:"";
    display:table
}
.cf:after {
    clear:both
}
.cf {
    zoom:1
}
/* = Function = */
 .mx-button {
     float: left;
 }
 .mx-button input {
     display: none;
 }
 .mx-button label {
     background: #ccc;
     border: 1px solid #888;
     color: #666;
     padding: 5px 10px;
 }
 .mx-button label:hover {
     background-color: #ddd;
 }
 .mx-button label:active, .mx-button input:focus + label {
     background-color: #aaa;
 }
 .mx-button input:checked + label {
     background-color: #b4b4b4;
 }
 /* = Fancy (Twitter Bootstrap) = */
 form {
     font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
     margin: 80px;
 }
 .mx-button label {
     background-color: #f5f5f5;
     background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
     background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
     background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
     background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6);
     background-image: linear-gradient(top, #ffffff, #e6e6e6);
     background-repeat: repeat-x;
     filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#e6e6e6', GradientType=0);
     border-color: #e6e6e6 #e6e6e6 #bfbfbf;
     border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
     border: 1px solid #cccccc;
     border-bottom-color: #b3b3b3;
     -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
     -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
     box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
     color: #333333;
     cursor: pointer;
     display: inline-block;
     margin-bottom: 0;
     margin-left: -1px;
     padding: 4px 10px;
     font-size: 13px;
     line-height: 18px;
     text-align: center;
     text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
     vertical-align: middle;
 }
 .mx-button label:hover {
     background-color: #e6e6e6;
     background-position: 0 -15px;
     color: #333333;
     text-decoration: none;
     -webkit-transition: background-position 0.1s linear;
     -moz-transition: background-position 0.1s linear;
     -ms-transition: background-position 0.1s linear;
     -o-transition: background-position 0.1s linear;
     transition: background-position 0.1s linear;
 }
 .mx-button label:active, .mx-button input:focus + label {
     background-color: #d9d9d9;
     background-image: none;
     -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
     -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
     box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
     outline: 0;
 }
 .mx-button input:checked + label {
     background: #f5f5f5;
     -webkit-box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
     -moz-box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
     box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
 }
 .mx-button:first-child label {
     -webkit-border-top-left-radius: 4px;
     -moz-border-radius-topleft: 4px;
     border-top-left-radius: 4px;
     -webkit-border-bottom-left-radius: 4px;
     -moz-border-radius-bottomleft: 4px;
     border-bottom-left-radius: 4px;
     margin-left: 0;
 }
 .mx-button:last-child label {
     -webkit-border-top-right-radius: 4px;
     -moz-border-radius-topright: 4px;
     border-top-right-radius: 4px;
     -webkit-border-bottom-right-radius: 4px;
     -moz-border-radius-bottomright: 4px;
     border-bottom-right-radius: 4px;
 }
 /*slide bar*/
 input[type=range], ::-moz-range-track, ::-ms-track {
     -webkit-appearance: none;
     background-color: 3f91e5;
     width: 250px;
     height:20px;
 }
 ::-webkit-slider-thumb, ::-moz-range-thumb, ::-ms-thumb {
     -webkit-appearance: none;
     background-color: #666;
     width: 10px;
     height: 20px;
 }
 /*submit and reset*/
 button {
     -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
     -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
     box-shadow:inset 0px 1px 0px 0px #ffffff;
     background-color:#ededed;
     -webkit-border-top-left-radius:5px;
     -moz-border-radius-topleft:5px;
     border-top-left-radius:5px;
     -webkit-border-top-right-radius:5px;
     -moz-border-radius-topright:5px;
     border-top-right-radius:5px;
     -webkit-border-bottom-right-radius:5px;
     -moz-border-radius-bottomright:5px;
     border-bottom-right-radius:5px;
     -webkit-border-bottom-left-radius:5px;
     -moz-border-radius-bottomleft:5px;
     border-bottom-left-radius:5px;
     text-indent:0;
     border:1px solid #dcdcdc;
     display:inline-block;
     color:#777777;
     font-family:arial;
     font-size:14px;
     font-weight:normal;
     font-style:normal;
     height:36px;
     line-height:36px;
     width:70px;
     text-decoration:none;
     text-align:center;
     text-shadow:1px 1px 0px #ffffff;
 }
 button:hover {
     background-color:#dfdfdf;
 }
 button:active {
     position:relative;
     top:1px;
 }
</STYLE>
</HTML>