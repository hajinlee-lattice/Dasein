USE `PLS_MultiTenant`;

CREATE PROCEDURE `UpdatePLSTables`()
  BEGIN
    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH` ADD COLUMN `ACCOUNTS_DUPLICATED` BIGINT;
    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH` ADD COLUMN `CONTACTS_DUPLICATED` BIGINT;

    ALTER TABLE `PLS_MultiTenant`.`DATA_INTEG_STATUS_MONITORING` ADD COLUMN `ERROR_MESSAGE` VARCHAR(1024);
    ALTER TABLE `PLS_MultiTenant`.`TENANT`
    ADD COLUMN `NOTIFICATION_LEVEL` VARCHAR(20) NULL DEFAULT 'ERROR' AFTER `EXPIRED_TIME`;

    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH` ADD COLUMN `CONTACTS_SELECTED` BIGINT;
    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH` ADD COLUMN `CONTACTS_SUPPRESSED` BIGINT;

    ALTER TABLE `PLS_MultiTenant`.`ATLAS_S3_IMPORT_SYSTEM`
      ADD COLUMN `ACCOUNT_SYSTEM_ID` VARCHAR(255);

    ALTER TABLE `PLS_MultiTenant`.`ATLAS_S3_IMPORT_SYSTEM`
      ADD COLUMN `CONTACT_SYSTEM_ID` VARCHAR(255);

    ALTER TABLE `PLS_MultiTenant`.`ATLAS_S3_IMPORT_SYSTEM`
      ADD COLUMN `DISPLAY_NAME` VARCHAR(255);

    ALTER TABLE `PLS_MultiTenant`.`ATLAS_S3_IMPORT_SYSTEM`
      ADD COLUMN `MAP_TO_LATTICE_ACCOUNT` BIT;

    ALTER TABLE `PLS_MultiTenant`.`ATLAS_S3_IMPORT_SYSTEM`
      ADD COLUMN `MAP_TO_LATTICE_CONTACT` BIT;

    ALTER TABLE `PLS_MultiTenant`.`ATLAS_S3_IMPORT_SYSTEM`
      ADD COLUMN `PRIORITY` INTEGER NOT NULL;

    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH_CHANNEL`
      CHANGE `CRON_SCHEDULE` `CRON_SCHEDULE_EXPRESSION` varchar(255);

    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH_CHANNEL`
      CHANGE `TOP_N_COUNT` `MAX_ACCOUNTS_TO_LAUNCH` bigint;

    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH_CHANNEL`
      DROP COLUMN `CONTACTS_LAUNCHED`;

    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH_CHANNEL`
      DROP COLUMN `ACCOUNTS_LAUNCHED`;

    ALTER TABLE `PLS_MultiTenant`.`PLAY_LAUNCH_CHANNEL`
      DROP COLUMN `EXCLUDE_ITEMS_WITHOUT_SFID`;
  END;
//
DELIMITER;

CALL `UpdatePLSTables`();
