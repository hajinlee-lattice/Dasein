package com.latticeengines.dellebi.util;

import javax.mail.Transport;

import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.testng.PowerMockTestCase;
import org.testng.Assert;
import org.testng.annotations.Test;

@PrepareForTest({MailSender.class,Transport.class})
public class MailSenderUnitTestNG  extends PowerMockTestCase{
    
    @Test(groups = "unit") 
    public void testSendEmail() throws Exception {
        
        PowerMockito.mockStatic(Transport.class);
        
        MailSender ms = new MailSender();
        ms.setMailHost("smtprelay.lattice.local");
        ms.setmailFrom("llu@lattice-engines.com");
        Boolean result = ms.sendEmail("llu@lattice-engines.com", "EBI Daily Refresh -- Success", "EBI daily refresh just finished successfully.");        
        Boolean expected = true;
        Assert.assertEquals(result, expected);     
    }
}
